# Wind Chime Player 颜色系统使用指南

**版本**: 1.0  
**最后更新**: 2025-10-03

---

## 📚 目录

1. [概述](#概述)
2. [颜色语义系统](#颜色语义系统)
3. [使用规范](#使用规范)
4. [常见模式](#常见模式)
5. [最佳实践](#最佳实践)
6. [常见错误](#常见错误)

---

## 概述

### 设计理念

Wind Chime Player 使用语义化的颜色系统，确保在浅色和深色模式下都有良好的可读性和一致的视觉体验。

### 核心原则

1. **语义优先** - 使用语义化的颜色类，而非具体的颜色值
2. **对比度保证** - 所有文字至少达到 WCAG AA 级别（4.5:1）
3. **主题适配** - 每个颜色都有对应的深色模式变体
4. **一致性** - 相同语义的元素使用相同的颜色

---

## 颜色语义系统

### 文本颜色层次

#### 主要文本 (Primary Text)
**用途**: 标题、主要内容  
**对比度**: 高

```tsx
// 浅色模式: #0F172A (深蓝黑)
// 深色模式: #E5EAF3 (亮白蓝)

className="text-slate-900 dark:text-dark-900"
```

**使用场景**:
- 页面标题
- 卡片标题
- 列表项主标题
- 按钮文字

#### 次要文本 (Secondary Text)
**用途**: 副标题、说明文字  
**对比度**: 中等

```tsx
// 浅色模式: #334155 或 #475569
// 深色模式: #C7D2FE (淡紫白)

className="text-slate-600 dark:text-dark-700"
```

**使用场景**:
- 副标题
- 描述文字
- 导航项文字
- 表单标签

#### 辅助文本 (Muted Text)
**用途**: 元数据、时间戳、计数  
**对比度**: 低

```tsx
// 浅色模式: #64748B
// 深色模式: #94A3B8 (中性灰)

className="text-slate-500 dark:text-dark-600"
```

**使用场景**:
- 时间戳
- 文件大小
- 曲目数量
- 辅助说明

#### 禁用文本 (Disabled Text)
**用途**: 禁用状态的文字  
**对比度**: 最低

```tsx
// 浅色模式: #94A3B8
// 深色模式: #64748B (暗灰)

className="text-slate-400 dark:text-dark-500"
```

**使用场景**:
- 禁用的按钮
- 不可用的选项
- 占位符文本（部分场景）

### 背景颜色层次

#### 主背景 (Primary Background)
```tsx
// 浅色模式: #FDFDFB (温柔米白)
// 深色模式: #0B1220 (深蓝黑)

className="bg-white dark:bg-dark-50"
// 或使用应用级渐变背景（通过 CSS 变量）
```

#### 次级背景 / 卡片 (Secondary Background)
```tsx
// 浅色模式: #F8F7F4 或 #FFFFFF
// 深色模式: #0F172A (深灰蓝)

className="bg-slate-50 dark:bg-dark-100"
```

#### 三级背景 / 嵌套卡片 (Tertiary Background)
```tsx
// 浅色模式: #F2F1ED
// 深色模式: #111827 (暖深灰)

className="bg-slate-100 dark:bg-dark-200"
```

### 边框颜色

#### 主要边框 (Primary Border)
```tsx
// 浅色模式: #D9D6D0
// 深色模式: rgba(148, 163, 184, 0.2) (柔和灰)

className="border-slate-200 dark:border-dark-400"
```

#### 次要边框 / 分隔线 (Secondary Border)
```tsx
// 浅色模式: #E8E6E2
// 深色模式: rgba(100, 116, 139, 0.15)

className="border-slate-100 dark:border-dark-500/30"
```

#### 焦点边框 (Focus Border)
```tsx
// 浅色模式: #2563EB
// 深色模式: #6366F1

className="border-blue-600 dark:border-blue-500"
// 或使用 ring
className="ring-2 ring-brand-500"
```

### 功能色

#### 品牌色 (Brand Color)
```tsx
// 主品牌色: #2B6FFF
className="text-brand-600 dark:text-brand-400"
className="bg-brand-600 dark:bg-brand-500"
```

#### 成功 (Success)
```tsx
// 浅色: #18C37E
// 深色: #22C55E
className="text-green-600 dark:text-green-400"
className="bg-green-50 dark:bg-green-900/20"
```

#### 警告 (Warning)
```tsx
// 浅色: #FDBA4D
// 深色: #F59E0B
className="text-amber-600 dark:text-amber-400"
className="bg-amber-50 dark:bg-amber-900/20"
```

#### 错误 (Error)
```tsx
// 浅色: #F05252
// 深色: #EF4444
className="text-red-600 dark:text-red-400"
className="bg-red-50 dark:bg-red-900/20"
```

---

## 使用规范

### 基本规则

#### 规则 1: 永远提供深色模式变体

❌ **错误**:
```tsx
<div className="text-slate-900">标题</div>
```

✅ **正确**:
```tsx
<div className="text-slate-900 dark:text-dark-900">标题</div>
```

#### 规则 2: 避免重复的 dark: 类

❌ **错误**:
```tsx
<div className="text-slate-900 dark:text-dark-900 dark:text-dark-800">
```

✅ **正确**:
```tsx
<div className="text-slate-900 dark:text-dark-900">
```

#### 规则 3: 透明度值范围 0-100

❌ **错误**:
```tsx
<div className="bg-blue-900/200">  {/* 200 > 100 */}
```

✅ **正确**:
```tsx
<div className="bg-blue-900/20">
```

#### 规则 4: 确保足够的对比度

❌ **错误** (浅色背景上使用 `text-slate-50`):
```tsx
<div className="bg-white text-slate-50">几乎不可见</div>
```

✅ **正确**:
```tsx
<div className="bg-white text-slate-500">清晰可读</div>
```

### 交互状态

#### Hover 状态

```tsx
// 文字 hover
className="text-slate-600 hover:text-slate-800 dark:text-dark-700 dark:hover:text-dark-900"

// 背景 hover
className="bg-slate-50 hover:bg-slate-100 dark:bg-dark-200 dark:hover:bg-dark-300"

// 边框 hover
className="border-slate-200 hover:border-slate-300 dark:border-dark-400 dark:hover:border-dark-500"
```

#### Active/Selected 状态

```tsx
// 选中的导航项
className={`
  ${isActive 
    ? 'text-brand-600 bg-brand-50 dark:text-brand-400 dark:bg-brand-900/20' 
    : 'text-slate-600 dark:text-dark-700'
  }
`}
```

#### Disabled 状态

```tsx
className="
  disabled:text-slate-400 disabled:bg-slate-100 disabled:cursor-not-allowed
  dark:disabled:text-dark-500 dark:disabled:bg-dark-300
"
```

---

## 常见模式

### 模式 1: 卡片组件

```tsx
<div className="
  bg-white dark:bg-dark-100
  border border-slate-200 dark:border-dark-400
  rounded-lg p-4
  hover:shadow-md
  transition-all duration-200
">
  <h3 className="text-lg font-semibold text-slate-900 dark:text-dark-900">
    卡片标题
  </h3>
  <p className="text-sm text-slate-600 dark:text-dark-700 mt-2">
    卡片描述文字
  </p>
  <div className="text-xs text-slate-500 dark:text-dark-600 mt-4">
    元数据: 123 项
  </div>
</div>
```

### 模式 2: 列表项

```tsx
<div className="
  group cursor-pointer
  border-b border-slate-100 dark:border-white/10
  hover:bg-slate-50 dark:hover:bg-dark-200/50
  transition-colors
">
  <div className="p-4">
    <div className="font-medium text-slate-900 dark:text-dark-900 group-hover:text-brand-600">
      列表项标题
    </div>
    <div className="text-sm text-slate-500 dark:text-dark-700 mt-1">
      列表项副文本
    </div>
  </div>
</div>
```

### 模式 3: 按钮

#### 主要按钮
```tsx
<button className="
  px-4 py-2 rounded-lg
  bg-brand-600 hover:bg-brand-700 active:bg-brand-800
  dark:bg-brand-500 dark:hover:bg-brand-600
  text-white
  transition-colors duration-200
">
  确认
</button>
```

#### 次要按钮
```tsx
<button className="
  px-4 py-2 rounded-lg
  bg-slate-100 hover:bg-slate-200
  dark:bg-dark-200 dark:hover:bg-dark-300
  text-slate-700 dark:text-dark-900
  transition-colors duration-200
">
  取消
</button>
```

#### 幽灵按钮
```tsx
<button className="
  px-4 py-2 rounded-lg
  border border-slate-300 dark:border-dark-400
  hover:bg-slate-50 dark:hover:bg-dark-200/50
  text-slate-700 dark:text-dark-900
  transition-colors duration-200
">
  选项
</button>
```

### 模式 4: 输入框

```tsx
<input className="
  w-full px-3 py-2 rounded-lg
  bg-white dark:bg-dark-100
  border border-slate-300 dark:border-dark-400
  focus:border-brand-500 focus:ring-2 focus:ring-brand-500/20
  text-slate-900 dark:text-dark-900
  placeholder:text-slate-400 dark:placeholder:text-dark-600
  transition-colors
" />
```

### 模式 5: 模态框

```tsx
{/* 背景遮罩 */}
<div className="fixed inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm">
  {/* 模态框主体 */}
  <div className="
    bg-white/95 dark:bg-dark-100/95
    border border-slate-200 dark:border-dark-400
    rounded-2xl shadow-2xl
    p-6
  ">
    <h3 className="text-xl font-semibold text-slate-900 dark:text-dark-900">
      标题
    </h3>
    <p className="text-slate-600 dark:text-dark-700 mt-2">
      内容
    </p>
  </div>
</div>
```

---

## 最佳实践

### 1. 使用 CSS 变量

对于复杂的样式，考虑使用 CSS 变量：

```css
/* styles.css */
:root {
  --text-primary: #0F172A;
  --text-secondary: #334155;
}

[data-theme="dark"] {
  --text-primary: #E5EAF3;
  --text-secondary: #C7D2FE;
}
```

```tsx
<div style={{ color: 'var(--text-primary)' }}>
  使用 CSS 变量
</div>
```

### 2. 组件级别的颜色抽象

```tsx
// 定义常量
const COLORS = {
  text: {
    primary: 'text-slate-900 dark:text-dark-900',
    secondary: 'text-slate-600 dark:text-dark-700',
    muted: 'text-slate-500 dark:text-dark-600',
  },
  bg: {
    card: 'bg-white dark:bg-dark-100',
    hover: 'hover:bg-slate-50 dark:hover:bg-dark-200',
  }
};

// 使用
<div className={COLORS.text.primary}>主标题</div>
```

### 3. 使用 Tailwind 的 @apply

```css
/* 定义可复用的类 */
.card-base {
  @apply bg-white dark:bg-dark-100;
  @apply border border-slate-200 dark:border-dark-400;
  @apply rounded-lg;
}

.text-primary {
  @apply text-slate-900 dark:text-dark-900;
}
```

### 4. 条件类名辅助

```tsx
import clsx from 'clsx';

<div className={clsx(
  'text-slate-900 dark:text-dark-900',
  isActive && 'text-brand-600 dark:text-brand-400',
  isDisabled && 'opacity-50 cursor-not-allowed'
)}>
  内容
</div>
```

---

## 常见错误

### 错误 1: 拼写错误

❌ **错误**:
```tsx
dark:text-dark-9000  // 多了一个 0
```

✅ **正确**:
```tsx
dark:text-dark-900
```

### 错误 2: 透明度值错误

❌ **错误**:
```tsx
bg-blue-900/200  // 应该是 0-100
```

✅ **正确**:
```tsx
bg-blue-900/20
```

### 错误 3: 缺少深色模式

❌ **错误**:
```tsx
<div className="text-slate-900">
  标题
</div>
```

✅ **正确**:
```tsx
<div className="text-slate-900 dark:text-dark-900">
  标题
</div>
```

### 错误 4: 重复的 dark: 类

❌ **错误**:
```tsx
<div className="text-slate-900 dark:text-dark-900 dark:text-dark-800">
```

✅ **正确**:
```tsx
<div className="text-slate-900 dark:text-dark-900">
```

### 错误 5: 对比度不足

❌ **错误**:
```tsx
<div className="bg-white text-slate-200">
  几乎看不见
</div>
```

✅ **正确**:
```tsx
<div className="bg-white text-slate-700">
  清晰可读
</div>
```

### 错误 6: 硬编码颜色值

❌ **错误**:
```tsx
<div style={{ color: '#333333' }}>
  硬编码颜色
</div>
```

✅ **正确**:
```tsx
<div className="text-slate-700 dark:text-dark-800">
  使用 Tailwind 类
</div>
```

---

## 快速参考表

### 文本颜色

| 用途 | 浅色类 | 深色类 | 完整类名 |
|------|--------|--------|----------|
| 主标题 | `text-slate-900` | `dark:text-dark-900` | `text-slate-900 dark:text-dark-900` |
| 副标题 | `text-slate-600` | `dark:text-dark-700` | `text-slate-600 dark:text-dark-700` |
| 辅助文字 | `text-slate-500` | `dark:text-dark-600` | `text-slate-500 dark:text-dark-600` |
| 禁用 | `text-slate-400` | `dark:text-dark-500` | `text-slate-400 dark:text-dark-500` |

### 背景颜色

| 用途 | 浅色类 | 深色类 | 完整类名 |
|------|--------|--------|----------|
| 主背景 | `bg-white` | `dark:bg-dark-50` | `bg-white dark:bg-dark-50` |
| 卡片 | `bg-slate-50` | `dark:bg-dark-100` | `bg-slate-50 dark:bg-dark-100` |
| 嵌套卡片 | `bg-slate-100` | `dark:bg-dark-200` | `bg-slate-100 dark:bg-dark-200` |

### 边框颜色

| 用途 | 浅色类 | 深色类 | 完整类名 |
|------|--------|--------|----------|
| 主边框 | `border-slate-200` | `dark:border-dark-400` | `border-slate-200 dark:border-dark-400` |
| 分隔线 | `border-slate-100` | `dark:border-dark-500/30` | `border-slate-100 dark:border-dark-500/30` |
| 焦点 | `border-brand-500` | `dark:border-brand-500` | `border-brand-500` |

---

## 工具与资源

### 自动化检查

使用项目中的脚本检查颜色一致性：

```bash
# 检查深色模式适配
node scripts/check-dark-mode.js

# 自动修复常见问题
node scripts/fix-theme-consistency.js
```

### 对比度检查工具

在线工具：
- [WebAIM Contrast Checker](https://webaim.org/resources/contrastchecker/)
- [Contrast Ratio](https://contrast-ratio.com/)

### Tailwind 配置

参考 `tailwind.config.js` 中的完整颜色定义。

---

## 更新日志

### v1.0 (2025-10-03)
- 初始版本
- 定义核心颜色语义系统
- 添加使用规范和最佳实践
- 提供常见模式和错误示例

---

**维护者**: Wind Chime Player Team  
**反馈**: 如有问题或建议，请提交 Issue









