# ä¸“è¾‘è§†å›¾ä¼˜åŒ– - æ€§èƒ½å’Œè§†è§‰æ”¹è¿›

## æ›´æ–°æ—¥æœŸ
2025-10-06

## é—®é¢˜åˆ†æ

### ç”¨æˆ·åé¦ˆçš„é—®é¢˜
1. âŒ çª—å£æ‹–å¤§åï¼Œä¸“è¾‘å°é¢å¤ªå¤§ï¼Œä¸å¤Ÿç´§å‡‘
2. âŒ é¼ æ ‡é«˜å…‰æ•ˆæœæœ‰é”™ä½
3. âŒ é«˜å…‰æ•ˆæœçœ‹ä¸æ¸…æ¥š
4. âŒ æ»šåŠ¨å’Œäº¤äº’æ—¶æœ‰å¡é¡¿æ„Ÿ

## ä¼˜åŒ–æ–¹æ¡ˆ

### 1. å°é¢å°ºå¯¸è°ƒæ•´ ğŸ“

#### ä¼˜åŒ–å‰
```typescript
è¶…å¤§å±å¹• (â‰¥1920px): 200px
å¤§å±å¹• (â‰¥1600px): 180px
ä¸­å¤§å±å¹• (â‰¥1280px): 165px
```

#### ä¼˜åŒ–å
```typescript
è¶…å¤§å±å¹• (â‰¥1920px): 160px  â¬‡ï¸ -40px
å¤§å±å¹• (â‰¥1600px): 155px     â¬‡ï¸ -25px
ä¸­å¤§å±å¹• (â‰¥1280px): 150px   â¬‡ï¸ -15px
ä¸­ç­‰å±å¹• (â‰¥1024px): 145px   â¬‡ï¸ -5px
å°å±å¹• (â‰¥768px): 140px      â¬‡ï¸ ä¿æŒ
```

**æ”¹è¿›æ•ˆæœ**: å¤§å±å¹•ä¸‹å¸ƒå±€æ›´ç´§å‡‘ï¼Œå¯æ˜¾ç¤ºæ›´å¤šä¸“è¾‘

### 2. ç½‘æ ¼é—´è·ä¼˜åŒ– ğŸ“

#### ä¼˜åŒ–å‰
```css
gap: clamp(1rem, calc(size * 0.12), 2.5rem);
padding: 2rem 0;
```

#### ä¼˜åŒ–å
```css
gap: clamp(0.875rem, calc(size * 0.1), 1.5rem);  /* é—´è·æ›´ç´§å‡‘ */
padding: 1.5rem 0;  /* å‡å°‘ä¸Šä¸‹å†…è¾¹è· */
grid-template-columns: repeat(auto-fill, minmax(calc(size + 50px), 1fr));  /* ä¼˜åŒ–åˆ—å®½ */
```

**æ”¹è¿›æ•ˆæœ**: 
- é—´è·ä»æœ€å¤§ 2.5rem é™è‡³ 1.5rem
- ä¸Šä¸‹å†…è¾¹è·ä» 2rem é™è‡³ 1.5rem
- åˆ—å®½è®¡ç®—æ›´ç²¾ç¡®

### 3. é«˜å…‰æ•ˆæœé‡æ„ âœ¨

#### ä¼˜åŒ–å‰ - çº¿æ€§æ¸å˜ + RAF èŠ‚æµ
```typescript
// RAF èŠ‚æµå¯¼è‡´å»¶è¿Ÿ
if (artEl._rafId) return;
artEl._rafId = requestAnimationFrame(() => {
  // ä½¿ç”¨çº¿æ€§æ¸å˜ï¼Œè§’åº¦è®¡ç®—
  background: linear-gradient(
    calc(var(--ang) * 1deg),
    ...
  );
});
```

**é—®é¢˜**:
- RAF èŠ‚æµé€ æˆ 16ms+ å»¶è¿Ÿï¼Œæ„Ÿè§‰å¡é¡¿
- çº¿æ€§æ¸å˜éœ€è¦è§’åº¦è®¡ç®—ï¼Œä½ç½®ä¸å‡†ç¡®
- é«˜å…‰å¼ºåº¦ä¸å¤Ÿæ˜æ˜¾

#### ä¼˜åŒ–å - å¾„å‘æ¸å˜ + ç›´æ¥æ›´æ–°
```typescript
// ç§»é™¤ RAF èŠ‚æµï¼Œç›´æ¥æ›´æ–°
const handleMouseMove = (e: React.MouseEvent) => {
  const artEl = e.currentTarget;
  const rect = artEl.getBoundingClientRect();
  const x = (e.clientX - rect.left) / rect.width;
  const y = (e.clientY - rect.top) / rect.height;
  
  // ç›´æ¥æ›´æ–° CSS å˜é‡
  artEl.style.setProperty('--mx', x.toFixed(3));
  artEl.style.setProperty('--my', y.toFixed(3));
  artEl.style.setProperty('--gloss', (0.3 + 0.7 * strength).toFixed(3));
};
```

```css
/* ä½¿ç”¨å¾„å‘æ¸å˜ï¼Œåœ†å¿ƒè·Ÿéšé¼ æ ‡ */
background: radial-gradient(
  circle at calc(var(--mx) * 100%) calc(var(--my) * 100%),
  rgba(255, 255, 255, calc(var(--gloss) * 0.8)) 0%,
  rgba(255, 255, 255, calc(var(--gloss) * 0.3)) 25%,
  rgba(255, 255, 255, calc(var(--gloss) * 0.05)) 50%,
  rgba(0, 0, 0, 0) 70%
);
mix-blend-mode: soft-light;  /* ä» overlay æ”¹ä¸º soft-light */
```

**æ”¹è¿›æ•ˆæœ**:
- âœ… ç§»é™¤ RAF èŠ‚æµï¼Œå“åº”æ›´å³æ—¶
- âœ… å¾„å‘æ¸å˜ç›´æ¥è·Ÿéšé¼ æ ‡ï¼Œæ— é”™ä½
- âœ… é«˜å…‰å¼ºåº¦æå‡ (0.25-0.8 â†’ 0.3-1.0)
- âœ… soft-light æ··åˆæ¨¡å¼æ›´è‡ªç„¶

### 4. è§†è§‰ç»†èŠ‚è°ƒæ•´ ğŸ¨

#### å°é¢åœ†è§’
```css
/* ä¼˜åŒ–å‰ */
border-radius: 12px;

/* ä¼˜åŒ–å */
border-radius: 10px;  /* ç¨å¾®å°ä¸€ç‚¹ï¼Œæ›´ç²¾è‡´ */
```

#### é˜´å½±ä¼˜åŒ–
```css
/* ä¼˜åŒ–å‰ - è¾ƒé‡çš„é˜´å½± */
box-shadow: 
  0 1px 2px rgba(0, 0, 0, 0.06),
  0 4px 14px rgba(0, 0, 0, 0.12),
  0 10px 24px rgba(0, 0, 0, 0.08);

/* ä¼˜åŒ–å - æ›´è½»ç›ˆçš„é˜´å½± */
box-shadow: 
  0 1px 3px rgba(0, 0, 0, 0.08),
  0 3px 10px rgba(0, 0, 0, 0.10),
  0 8px 18px rgba(0, 0, 0, 0.06);
```

#### å­—ä½“å¤§å°
```css
/* ä¸“è¾‘åç§° */
font-size: 15px â†’ 14px
line-clamp: 1 â†’ 2  /* å…è®¸æ˜¾ç¤ºä¸¤è¡Œ */
min-height: 36px   /* ç¡®ä¿é«˜åº¦ä¸€è‡´ */

/* è‰ºæœ¯å®¶ä¿¡æ¯ */
font-size: 12px â†’ 11px
```

### 5. æ€§èƒ½ä¼˜åŒ– âš¡

#### ä¼˜åŒ–å‰çš„æ€§èƒ½é—®é¢˜
- âŒ RAF èŠ‚æµå¯¼è‡´ 16ms å»¶è¿Ÿ
- âŒ æ¯æ¬¡é¼ æ ‡ç§»åŠ¨è§¦å‘è§’åº¦è®¡ç®—
- âŒ å¤æ‚çš„çº¿æ€§æ¸å˜é‡ç»˜
- âŒ opacity transition 150ms

#### ä¼˜åŒ–å
```css
/* ç§»é™¤ä¸å¿…è¦çš„ transition */
.album-cover-modern::before {
  will-change: background;  /* åªä¼˜åŒ– background */
  opacity: 1;  /* å§‹ç»ˆæ˜¾ç¤ºï¼Œé€šè¿‡ --gloss æ§åˆ¶å¼ºåº¦ */
}
```

**æ€§èƒ½æå‡**:
- âœ… ç§»é™¤ RAF èŠ‚æµï¼Œå‡å°‘ 16ms å»¶è¿Ÿ
- âœ… ç§»é™¤è§’åº¦è®¡ç®—ï¼Œå‡å°‘ CPU è´Ÿæ‹…
- âœ… å¾„å‘æ¸å˜æ¯”çº¿æ€§æ¸å˜æ›´é«˜æ•ˆ
- âœ… ç§»é™¤ opacity transitionï¼Œå‡å°‘é‡ç»˜

## å¯¹æ¯”æ•ˆæœ

### å¸ƒå±€å¯†åº¦
| å±å¹•å°ºå¯¸ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿› |
|---------|-------|-------|------|
| 1920px | å°é¢ 200pxï¼Œé—´è·å¤§ | å°é¢ 160pxï¼Œé—´è·é€‚ä¸­ | å¯å¤šæ˜¾ç¤º 25% ä¸“è¾‘ |
| 1600px | å°é¢ 180px | å°é¢ 155px | å¯å¤šæ˜¾ç¤º 15% ä¸“è¾‘ |
| 1280px | å°é¢ 165px | å°é¢ 150px | å¯å¤šæ˜¾ç¤º 10% ä¸“è¾‘ |

### äº¤äº’æ€§èƒ½
| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|-----|-------|-------|
| é¼ æ ‡ç§»åŠ¨å“åº”å»¶è¿Ÿ | ~16ms (RAF) | <1ms (ç›´æ¥) |
| é«˜å…‰ä½ç½®å‡†ç¡®åº¦ | æœ‰åç§» | ç²¾å‡†è·Ÿéš |
| é«˜å…‰å¯è§åº¦ | è¾ƒå¼± | æ¸…æ™°å¯è§ |
| CPU å ç”¨ | ä¸­ç­‰ | ä½ |

## æŠ€æœ¯ç»†èŠ‚

### CSS å˜é‡ä½¿ç”¨
```css
--cover-size: åŠ¨æ€  /* æ ¹æ®çª—å£å®½åº¦å®æ—¶è°ƒæ•´ */
--mx: 0-1          /* é¼ æ ‡ X åæ ‡ï¼ˆå½’ä¸€åŒ–ï¼‰ */
--my: 0-1          /* é¼ æ ‡ Y åæ ‡ï¼ˆå½’ä¸€åŒ–ï¼‰ */
--gloss: 0-1       /* é«˜å…‰å¼ºåº¦ */
```

### æ··åˆæ¨¡å¼é€‰æ‹©
- **overlay**: å¯¹æ¯”åº¦å¼ºï¼Œä½†å®¹æ˜“è¿‡æ›
- **soft-light**: æŸ”å’Œè‡ªç„¶ï¼Œé€‚åˆé«˜å…‰ âœ…

### æ¸å˜ç±»å‹é€‰æ‹©
- **linear-gradient**: éœ€è¦è§’åº¦è®¡ç®—ï¼Œä½ç½®ä¸å‡†
- **radial-gradient**: ç›´æ¥å®šä½åœ†å¿ƒï¼Œç²¾å‡†è·Ÿéš âœ…

## æ–‡ä»¶å˜æ›´

### ä¿®æ”¹æ–‡ä»¶
- `src/components/AlbumsView.tsx`:
  - ä¼˜åŒ–å°é¢å°ºå¯¸ç­–ç•¥
  - é‡æ„é«˜å…‰è·Ÿéšé€»è¾‘
  - ç§»é™¤ RAF èŠ‚æµ
  
- `src/styles/albums-view.css`:
  - è°ƒæ•´ç½‘æ ¼é—´è·
  - ä¼˜åŒ–å°é¢é˜´å½±å’Œåœ†è§’
  - é‡æ„é«˜å…‰æ•ˆæœä¸ºå¾„å‘æ¸å˜
  - è°ƒæ•´å­—ä½“å¤§å°

## ç”¨æˆ·ä½“éªŒæ”¹è¿›

### è§†è§‰æ–¹é¢
- âœ… å¸ƒå±€æ›´ç´§å‡‘ï¼Œå¤§å±å¹•ä¸‹ä¿¡æ¯å¯†åº¦æå‡
- âœ… é«˜å…‰æ•ˆæœæ›´æ¸…æ™°å¯è§
- âœ… é˜´å½±æ›´è½»ç›ˆï¼Œè§†è§‰æ›´èˆ’é€‚
- âœ… å­—ä½“å¤§å°æ›´åˆç†

### æ€§èƒ½æ–¹é¢
- âœ… æ»šåŠ¨æ›´æµç•…
- âœ… é¼ æ ‡ç§»åŠ¨å“åº”æ›´å³æ—¶
- âœ… æ— å¡é¡¿æ„Ÿ
- âœ… CPU å ç”¨é™ä½

### äº¤äº’æ–¹é¢
- âœ… é«˜å…‰ç²¾å‡†è·Ÿéšé¼ æ ‡ï¼Œæ— é”™ä½
- âœ… æ‚¬åœåé¦ˆæ›´æ˜æ˜¾
- âœ… åŠ¨ç”»æ›´è‡ªç„¶æµç•…

## åç»­å»ºè®®

- [ ] å¯è€ƒè™‘æ·»åŠ é«˜å…‰å¼ºåº¦è®¾ç½®ï¼ˆç”¨æˆ·è‡ªå®šä¹‰ï¼‰
- [ ] æ·»åŠ å°é¢å°ºå¯¸é¢„è®¾ï¼ˆå°/ä¸­/å¤§/è¶…å¤§ï¼‰
- [ ] ä¼˜åŒ–ä¸“è¾‘åç§°çš„ tooltip æ˜¾ç¤º
- [ ] æ·»åŠ é”®ç›˜å¯¼èˆªæ”¯æŒ

## æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–ä¸»è¦è§£å†³äº†ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š
1. **å¸ƒå±€ä¼˜åŒ–**: å°é¢å°ºå¯¸æ›´åˆç†ï¼Œé—´è·æ›´ç´§å‡‘
2. **æ€§èƒ½æå‡**: ç§»é™¤ RAF èŠ‚æµï¼Œå‡å°‘è®¡ç®—å¼€é”€
3. **è§†è§‰æ”¹è¿›**: é«˜å…‰æ•ˆæœæ›´æ¸…æ™°ã€ç²¾å‡†ã€æµç•…

ç”¨æˆ·ä½“éªŒå¾—åˆ°å…¨é¢æå‡ï¼ŒåŒæ—¶ä¿æŒäº†åŸæœ‰çš„æŠ½å±‰å¼è¯¦æƒ…é¢æ¿åŠŸèƒ½ã€‚










