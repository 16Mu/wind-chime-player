# 窗口最小尺寸设置 - 2025-10-06

> **日期**: 2025-10-06  
> **需求**: 设置窗口最小宽度为 950px  
> **状态**: ✅ 已完成

---

## 🎯 需求描述

设置应用程序窗口的最小宽度为 950px，防止用户将窗口缩小到过小的尺寸，导致界面布局混乱。

---

## ✅ 实现方案

### 修改 Tauri 配置文件

在 Tauri 配置文件中设置窗口的最小尺寸限制。

---

## 🔧 代码实现

### 文件: `src-tauri/tauri.conf.json`

**修改位置**: Line 19

**修改前**:
```json
{
  "title": "WindChime Player", 
  "width": 1200,
  "height": 800,
  "minWidth": 800,  // ← 旧的最小宽度
  "minHeight": 600,
  // ...
}
```

**修改后**:
```json
{
  "title": "WindChime Player", 
  "width": 1200,
  "height": 800,
  "minWidth": 950,  // ← 新的最小宽度
  "minHeight": 600,
  // ...
}
```

---

## 📏 窗口尺寸规格

| 参数 | 值 | 说明 |
|-----|---|------|
| **默认宽度** | 1200px | 应用启动时的窗口宽度 |
| **默认高度** | 800px | 应用启动时的窗口高度 |
| **最小宽度** | 950px | 窗口可缩小到的最小宽度 ⭐ |
| **最小高度** | 600px | 窗口可缩小到的最小高度 |
| **最大宽度** | null | 无限制（可全屏） |
| **最大高度** | null | 无限制（可全屏） |

---

## 🎨 为什么是 950px？

### 1. **UI 组件最小空间需求**

```
┌──────────────┬────────────────────────────────────────────┐
│              │                                            │
│左侧导航栏    │         主内容区                           │
│(190px 最窄)  │        (950 - 190 = 760px)                 │
│              │                                            │
└──────────────┴────────────────────────────────────────────┘
     190px                    760px
```

- **侧边栏最小宽度**: 190px（在 950px 窗口下）
- **主内容区最小宽度**: 760px
  - 足够显示 3-4 列专辑封面
  - 歌曲列表有足够的可读空间
  - 播放器控制按钮不会重叠

### 2. **播放器控制栏布局**

```
┌────────────────────────────────────────────────────────────┐
│ [封面] 歌名-歌手   ◀ ▶ ⏸   [进度条]   🔊 [音量] ⋯        │
└────────────────────────────────────────────────────────────┘
  ← 190px →    ← 200px →    ← 400px →    ← 160px →
```

950px 宽度确保：
- 歌曲信息区域（190px）完整显示
- 播放控制按钮（200px）居中显示
- 进度条（400px）有足够长度
- 右侧控制区（160px）功能完整

### 3. **与响应式断点配合**

根据之前的侧边栏响应式设计：

```css
@media (max-width: 999px) {
  .app-main:not(.sidebar-collapsed) {
    --sidebar-width: 190px; /* 最小宽度 */
  }
}
```

950px 正好落在这个断点内，侧边栏会使用最小宽度 190px。

---

## 🚫 限制行为

### 用户尝试缩小窗口时

1. **窗口宽度 > 950px**:
   - ✅ 可以继续缩小
   - 侧边栏根据响应式规则自动调整

2. **窗口宽度 = 950px**:
   - ⚠️ 到达最小宽度限制
   - 🚫 无法继续缩小（鼠标拖拽无效）
   - ✅ 侧边栏保持 190px

3. **尝试强制缩小到 < 950px**:
   - 🚫 操作系统/Tauri 阻止
   - 窗口保持在 950px

---

## 🧪 测试步骤

### 1. 启动应用
```bash
pnpm tauri dev
```

### 2. 测试最小宽度限制

1. **正常缩小窗口**
   - 拖拽窗口边缘向左缩小
   - ✅ 窗口可以缩小到 950px
   
2. **到达最小宽度**
   - 继续向左拖拽
   - ✅ 窗口停在 950px，无法继续缩小
   - ✅ 鼠标光标可能变化（表示已到极限）

3. **检查 UI 布局**
   - ✅ 侧边栏显示完整（190px）
   - ✅ 主内容区域有足够空间（760px）
   - ✅ 播放器控制按钮不重叠
   - ✅ 所有文字可读

### 3. 测试其他尺寸

1. **窗口放大**
   - ✅ 可以无限放大（直到屏幕边界）
   - ✅ 侧边栏自动调整到对应宽度

2. **窗口高度**
   - ✅ 最小高度 600px 仍然生效
   - ✅ 可以正常缩放

---

## 📊 与其他断点的关系

| 窗口宽度 | 侧边栏宽度 | 主内容区宽度 | 状态 |
|---------|-----------|------------|------|
| 1920px+ | 240px | 1680px+ | 超大屏幕 |
| 1600px | 230px | 1370px | 大屏幕 |
| 1400px | 220px | 1180px | 中大屏幕 |
| 1200px | 210px | 990px | 中等屏幕（默认） |
| 1000px | 200px | 800px | 小屏幕 |
| **950px** | **190px** | **760px** | **最小窗口** ⭐ |
| <950px | - | - | **禁止缩小** 🚫 |

---

## ⚙️ 其他窗口配置

完整的窗口配置参数：

```json
{
  "title": "WindChime Player",       // 窗口标题
  "width": 1200,                     // 默认宽度
  "height": 800,                     // 默认高度
  "minWidth": 950,                   // 最小宽度 ⭐
  "minHeight": 600,                  // 最小高度
  "maxWidth": null,                  // 最大宽度（无限制）
  "maxHeight": null,                 // 最大高度（无限制）
  "decorations": false,              // 无系统标题栏（自定义标题栏）
  "resizable": true,                 // 允许调整大小
  "transparent": false,              // 不透明
  "dragDropEnabled": false,          // 禁用拖放
  "skipTaskbar": false,              // 显示在任务栏
  "additionalBrowserArgs": "..."     // 浏览器参数
}
```

---

## 🔮 未来调整建议

### 如果需要更改最小宽度

1. **更大的最小宽度**（如 1024px）:
   - 适合：内容密集的应用
   - 缺点：限制小屏幕用户

2. **更小的最小宽度**（如 800px）:
   - 优点：支持更小的屏幕
   - 缺点：可能导致 UI 元素重叠

3. **动态调整**:
   - 根据用户设置或屏幕大小动态调整
   - 需要额外的 Rust 代码支持

### 建议的最小宽度范围

| 场景 | 推荐最小宽度 |
|-----|------------|
| 简约播放器 | 800px |
| 标准音乐应用 | 950px ⭐（当前） |
| 专业音乐软件 | 1024px |
| 全功能工作站 | 1280px |

---

## ✅ 实现完成

**状态**: 已完成  
**配置文件**: `src-tauri/tauri.conf.json`  
**生效时机**: 重新启动应用后  

---

## 📝 注意事项

1. **需要重启应用**: 修改配置文件后，需要重新运行 `pnpm tauri dev` 或重新构建应用
2. **开发模式**: 开发模式下也会生效
3. **生产构建**: 打包后的应用也会遵守此限制
4. **跨平台**: Windows、macOS、Linux 均支持

---

**现在窗口无法缩小到 950px 以下，确保 UI 始终保持良好布局！** 🎉








