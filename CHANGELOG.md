# 更新日志 (Changelog)

所有 WindChime Player 的重要更新都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [0.4.1] - 2025-10-06 (当前版本)

### 🚀 新增
- **混合播放引擎** - 创新的 Rust 原生引擎 + Web Audio API 双引擎架构
- **智能设置搜索** - 模糊搜索 + 智能高亮定位 + 实时下拉结果
- **零延迟 Seek** - 利用 Web Audio API 实现内存级 seek（< 10ms）
- **引擎智能切换** - 自动检测并平滑切换播放引擎，用户无感知

### 🎨 改进
- **macOS 风格设计升级** - 完全对齐 Apple Music 视觉语言
  - 采用 iOS 蓝主色调（#007AFF）
  - 毛玻璃效果（backdrop-filter）
  - macOS 标准灰度系统
- **专辑/艺术家视图优化** - 现代化网格布局 + 性能优化 + 视觉改进
- **进度条实时更新** - 使用 requestAnimationFrame，60fps 流畅更新
- **窗口体验优化** - 设置最小尺寸、响应式宽度、拖动性能优化

### 🐛 修复
- **播放器核心修复** - 修复暂停、seek、状态同步等7个关键问题
  - 修复暂停后无法继续播放
  - 修复 seek 操作时的状态异常
  - 修复进度条更新不流畅
  - 修复引擎切换时的状态同步
  - 修复播放状态不一致问题
  - 修复双击播放失效
  - 修复播放完成后的状态处理

### ⚠️ 已知问题
- WebDAV 功能已完整实现（前后端），但未进行完整测试验证

---

## [0.4.0.1] - 2025-10-04

### 🚀 新增
- **企业级歌单系统** - 完整的 CRUD、智能歌单引擎、导入导出
  - 支持普通歌单和智能歌单
  - 支持 M3U/M3U8/JSON 格式导入导出
  - 智能歌单引擎支持14种操作符和复杂逻辑组合
- **网络API集成** - 集成 LrcApi 公开服务
  - 自动获取歌词
  - 自动获取专辑封面
- **艺术家封面系统** - 三层优化架构
  - 数据库持久化
  - 智能预加载
  - 懒加载优化

### 🎨 改进
- **主题系统完善** - 修复浅色/深色模式切换问题
  - 优化品牌色系统
  - 修复主题切换时的视觉闪烁
  - 完善浅色模式的对比度
- **播放历史优化** - 自动刷新、统计数据优化
- **沉浸式体验提升** - 颜色提取优化、歌词显示改进

### 🐛 修复
- 修复6个 P0/P1 级别的阻塞性问题
- 修复歌单创建和删除的状态同步
- 修复艺术家封面加载失败问题
- 修复主题切换时的样式异常

### 🔧 架构优化
- 重构侧边栏，实现高内聚低耦合设计
- PlaylistManager 独立封装，提高可维护性

---

## [0.3.1] - 2025-09

### 🚀 新增
- **WebDAV 后端完成** - Stream 到 AsyncRead 转换
  - 支持远程音频流式播放
  - Range 请求支持
  - 网络错误处理优化

### 🔧 架构优化
- **Actor 架构优化** - 基于 Actor 模型的播放引擎重构
  - 清晰的职责分离
  - 消息驱动架构
  - 并发安全保证
- **智能缓存系统** - PreloadActor 实现
  - LRU 预加载算法
  - 后台自动加载
  - 内存占用控制

### 🐛 修复
- 修复沉浸式歌词闪动问题
- 优化歌词滚动动画性能
- 修复单引擎歌词滚动的竞态条件

---

## [0.2.0] - 2025-08

### 🚀 新增
- **完整的歌词系统** - 多格式支持
  - LRC 格式解析
  - 8种滚动动画效果
  - 沉浸式全屏歌词视图
- **音乐库管理优化** - FTS5 全文搜索

### 🎨 改进
- **简约现代化 UI 设计** - 移除过度的玻璃效果
- **温柔米白护眼主题** - 浅色模式优化
- 专辑封面提取和显示优化

---

## [0.1.0] - 2025-07

### 🚀 新增
- **基础音频播放功能** - 支持多种音频格式
  - MP3, FLAC, WAV, AAC, OGG
  - 基于 Symphonia + Rodio
- **SQLite 数据库集成** - 音乐库持久化
- **FTS5 全文搜索** - 快速定位音乐
- **基础 UI 框架** - React + Tauri 应用骨架

---

## 图例说明

- 🚀 新增 (Added) - 新功能
- 🎨 改进 (Changed) - 功能改进和优化
- 🐛 修复 (Fixed) - Bug 修复
- 🔧 架构优化 (Refactored) - 代码重构和架构改进
- ⚠️ 已知问题 (Known Issues) - 需要关注的问题
- 🗑️ 移除 (Removed) - 移除的功能
- 🔒 安全 (Security) - 安全相关更新

---

**完整版本对比**：可查看 [GitHub Releases](https://github.com/16Mu/wind-chime-player/releases)

